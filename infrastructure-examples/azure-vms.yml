---
cluster_name: azure-infra
azure:
  ssh_user: rocky
  operating_system:
    image_uri: erockyenterprisesoftwarefoundationinc1653071250513:rockylinux:free:8.6.0
    publisher: "erockyenterprisesoftwarefoundationinc1653071250513"
    offer: "rockylinux"
    sku: "free"
    version: "8.6.0"
  regions:
    westus:
      cidr_block: 10.1.0.0/16
      azs:
        0: 10.1.20.0/24
      service_ports:
        - name: ssh_access
          port: 22
          protocol: Tcp
          description: "SSH"
    westus3:
      cidr_block: 10.3.0.0/16
      azs:
        2: 10.3.20.0/24
        3: 10.3.30.0/24
      service_ports:
        - name: ssh_access
          port: 22
          protocol: Tcp
          description: "SSH"
      region_ports:
        - name: ping_access
          protocol: Icmp
          description: "ping"
  machines:
    dbt2-driver:
      type: dbt2-driver
      region: westus3
      az: 2
      instance_type: Standard_D2as_v4
      volume:
        type: StandardSSD_LRS
        size_gb: 50
    pg1:
      type: postgres
      region: westus3
      az: 3
      instance_type: Standard_D2as_v4
      service_ip: true
      volume:
        type: StandardSSD_LRS
        size_gb: 50
      additional_volumes:
        - mount_point: /opt/pg_data
          type: Standard_LRS
          size_gb: 50
          iops: null
        - mount_point: /opt/pg_wal
          type: Standard_LRS
          size_gb: 50
          iops: null
